{
	"name": "YTScribe - YouTube Video Knowledge Base with LLM Chat",
	"quality_gates": [
		"bun run typecheck",
		"bun test",
		"bun run lint"
	],
	"tasks": [
		{
			"category": "functional",
			"description": "Add real-time status updates during video processing using SSE",
			"steps": [
				"Add GET /api/videos/:id/status/stream SSE endpoint",
				"Emit events: status changes, progress percentage, errors",
				"Create src/hooks/useVideoStatus.ts to consume SSE",
				"Update VideoCard status in real-time",
				"Update ProcessingAnimation from SSE events",
				"Verify status updates propagate to UI"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Implement transcript timestamp navigation",
			"steps": [
				"Make timestamps in transcript clickable",
				"Create timestamp navigation context",
				"Scroll to and highlight clicked segment",
				"Add keyboard navigation (up/down arrows)",
				"Style active segment distinctly"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Add chat response citation linking to transcript timestamps",
			"steps": [
				"Modify chat service to include timestamp references in responses",
				"Parse citations in assistant messages",
				"Render citations as clickable links",
				"Clicking citation scrolls transcript to that timestamp",
				"Highlight cited sections in transcript"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Create user settings page",
			"steps": [
				"Create src/pages/settings.astro",
				"Show user profile info from OAuth",
				"Add logout button calling POST /auth/logout",
				"Add account deletion option (soft delete)",
				"Style consistently with app design"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Create app navigation header component",
			"steps": [
				"Create src/components/Header.tsx",
				"Logo linking to home, navigation links",
				"User avatar dropdown with settings and logout",
				"Mobile-responsive hamburger menu",
				"Add subtle animation on scroll (shrink/shadow)"
			],
			"passes": false
		},
		{
			"category": "reliability",
			"description": "Add comprehensive logging to backend",
			"steps": [
				"Install pino: `bun add pino pino-pretty`",
				"Create src/utils/logger.ts configured for dev/prod",
				"Add request logging middleware",
				"Log pipeline stages with timing",
				"Add structured error logging",
				"Verify logs appear in console during requests"
			],
			"passes": false
		},
		{
			"category": "performance",
			"description": "Optimize Framer Motion bundle with LazyMotion",
			"steps": [
				"Create src/components/LazyMotionProvider.tsx",
				"Use domAnimation features for smaller bundle",
				"Wrap app in LazyMotion provider",
				"Run `bun run build` and check bundle size",
				"Verify animations still work correctly"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Create Dockerfile for production deployment",
			"steps": [
				"Create Dockerfile with multi-stage build",
				"Use oven/bun:1 as base image",
				"Install yt-dlp and ffmpeg in runtime stage",
				"Build both backend and frontend",
				"Configure for Railway/Fly.io environment variables",
				"Run `docker build -t ytscribe .` and verify success",
				"Run container locally and verify health endpoint"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Create docker-compose for local development",
			"steps": [
				"Create docker-compose.yml",
				"Mount source code for hot reload",
				"Expose ports for backend and frontend",
				"Configure environment variables",
				"Run `docker-compose up` and verify both services start",
				"Verify hot reload works when editing files"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Add Railway deployment configuration",
			"steps": [
				"Create railway.toml with service configuration",
				"Configure SQLite volume mount for persistence",
				"Set up environment variables template",
				"Add health check configuration",
				"Document deployment steps in README"
			],
			"passes": false
		},
		{
			"category": "observability",
			"description": "Add basic analytics tracking",
			"steps": [
				"Create analytics table: id, userId, event, properties (JSON), createdAt",
				"Add trackEvent(userId, event, properties) function",
				"Track: video_added, transcription_completed, chat_message_sent",
				"Create admin endpoint GET /api/admin/analytics (protected)",
				"Verify events are recorded"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Set up E2E testing with Playwright",
			"steps": [
				"Install Playwright: `cd frontend && bun add -d @playwright/test`",
				"Run `bunx playwright install` to get browsers",
				"Create playwright.config.ts",
				"Create tests/e2e/home.spec.ts testing landing page loads",
				"Add e2e script to package.json",
				"Run `bun run e2e` and verify test passes"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Write E2E test for video add flow",
			"steps": [
				"Create tests/e2e/add-video.spec.ts",
				"Test: login, open add modal, enter URL, submit",
				"Verify video appears in library with pending status",
				"Mock or use test YouTube URL",
				"Run `bun run e2e` and verify passes"
			],
			"passes": false
		},
		{
			"category": "functional",
			"description": "Write E2E test for chat flow",
			"steps": [
				"Create tests/e2e/chat.spec.ts",
				"Test: navigate to completed video, send chat message",
				"Verify assistant response appears",
				"Test timestamp citation click scrolls transcript",
				"Run `bun run e2e` and verify passes"
			],
			"passes": false
		}
	]
}
